{"ast":null,"code":"import _objectWithoutProperties from \"/Users/saisaran/Desktop/BirdTag/UI/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"/Users/saisaran/Desktop/BirdTag/UI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nconst _excluded = [\"route\", \"totpSecretCode\", \"user\"];\nimport React__default, { useCallback } from 'react';\nimport { useSelector } from '@xstate/react';\nimport { getServiceFacade } from '@aws-amplify/ui';\nimport 'aws-amplify/auth';\nimport { AuthenticatorContext } from '../../context/AuthenticatorContext.mjs';\nimport { USE_AUTHENTICATOR_ERROR } from './constants.mjs';\nimport { getComparator, defaultComparator, getQRFields, getMachineFields } from './utils.mjs';\n\n/**\n * [ðŸ“– Docs](https://ui.docs.amplify.aws/react/connected-components/authenticator/headless#useauthenticator-hook)\n */\nfunction useAuthenticator(selector) {\n  const context = React__default.useContext(AuthenticatorContext);\n  if (!context) {\n    throw new Error(USE_AUTHENTICATOR_ERROR);\n  }\n  const {\n    service\n  } = context;\n  const {\n    send\n  } = service;\n  const xstateSelector = useCallback(state => _objectSpread({}, getServiceFacade({\n    send,\n    state\n  })), [send]);\n  const comparator = selector ? getComparator(selector) : defaultComparator;\n  // the purpose of `context.authStatus`is to intentionally override `facade.authStatus`. `facade.authStatus` does\n  // not update on external sign in events (for example when a user is not using the `Authenticator`).\n  const {\n    authStatus\n  } = context;\n  const facade = useSelector(service, xstateSelector, comparator);\n  const {\n      route,\n      totpSecretCode,\n      user\n    } = facade,\n    rest = _objectWithoutProperties(facade, _excluded);\n  // do not memoize output. `service.getSnapshot` reference remains stable preventing\n  // `fields` from updating with current form state on value changes\n  const serviceSnapshot = service.getSnapshot();\n  // legacy `QRFields` values only used for SetupTotp page to retrieve issuer information, will be removed in future\n  const QRFields = route === 'setupTotp' ? getQRFields(serviceSnapshot) : null;\n  // legacy `formFields` values required until form state is removed from state machine\n  const fields = getMachineFields(route, serviceSnapshot);\n  return _objectSpread(_objectSpread({}, rest), {}, {\n    authStatus,\n    route,\n    totpSecretCode,\n    user,\n    /** @deprecated For internal use only */\n    fields,\n    QRFields\n  });\n}\nexport { useAuthenticator as default };","map":{"version":3,"names":["React__default","useCallback","useSelector","getServiceFacade","AuthenticatorContext","USE_AUTHENTICATOR_ERROR","getComparator","defaultComparator","getQRFields","getMachineFields","useAuthenticator","selector","context","useContext","Error","service","send","xstateSelector","state","_objectSpread","comparator","authStatus","facade","route","totpSecretCode","user","rest","_objectWithoutProperties","_excluded","serviceSnapshot","getSnapshot","QRFields","fields","default"],"sources":["/Users/saisaran/Desktop/BirdTag/UI/node_modules/@aws-amplify/ui-react-core/dist/esm/Authenticator/hooks/useAuthenticator/useAuthenticator.mjs"],"sourcesContent":["import React__default, { useCallback } from 'react';\nimport { useSelector } from '@xstate/react';\nimport { getServiceFacade } from '@aws-amplify/ui';\nimport 'aws-amplify/auth';\nimport { AuthenticatorContext } from '../../context/AuthenticatorContext.mjs';\nimport { USE_AUTHENTICATOR_ERROR } from './constants.mjs';\nimport { getComparator, defaultComparator, getQRFields, getMachineFields } from './utils.mjs';\n\n/**\n * [ðŸ“– Docs](https://ui.docs.amplify.aws/react/connected-components/authenticator/headless#useauthenticator-hook)\n */\nfunction useAuthenticator(selector) {\n    const context = React__default.useContext(AuthenticatorContext);\n    if (!context) {\n        throw new Error(USE_AUTHENTICATOR_ERROR);\n    }\n    const { service } = context;\n    const { send } = service;\n    const xstateSelector = useCallback((state) => ({ ...getServiceFacade({ send, state }) }), [send]);\n    const comparator = selector ? getComparator(selector) : defaultComparator;\n    // the purpose of `context.authStatus`is to intentionally override `facade.authStatus`. `facade.authStatus` does\n    // not update on external sign in events (for example when a user is not using the `Authenticator`).\n    const { authStatus } = context;\n    const facade = useSelector(service, xstateSelector, comparator);\n    const { route, totpSecretCode, user, ...rest } = facade;\n    // do not memoize output. `service.getSnapshot` reference remains stable preventing\n    // `fields` from updating with current form state on value changes\n    const serviceSnapshot = service.getSnapshot();\n    // legacy `QRFields` values only used for SetupTotp page to retrieve issuer information, will be removed in future\n    const QRFields = route === 'setupTotp' ? getQRFields(serviceSnapshot) : null;\n    // legacy `formFields` values required until form state is removed from state machine\n    const fields = getMachineFields(route, serviceSnapshot);\n    return {\n        ...rest,\n        authStatus,\n        route,\n        totpSecretCode,\n        user,\n        /** @deprecated For internal use only */\n        fields,\n        QRFields,\n    };\n}\n\nexport { useAuthenticator as default };\n"],"mappings":";;;AAAA,OAAOA,cAAc,IAAIC,WAAW,QAAQ,OAAO;AACnD,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,gBAAgB,QAAQ,iBAAiB;AAClD,OAAO,kBAAkB;AACzB,SAASC,oBAAoB,QAAQ,wCAAwC;AAC7E,SAASC,uBAAuB,QAAQ,iBAAiB;AACzD,SAASC,aAAa,EAAEC,iBAAiB,EAAEC,WAAW,EAAEC,gBAAgB,QAAQ,aAAa;;AAE7F;AACA;AACA;AACA,SAASC,gBAAgBA,CAACC,QAAQ,EAAE;EAChC,MAAMC,OAAO,GAAGZ,cAAc,CAACa,UAAU,CAACT,oBAAoB,CAAC;EAC/D,IAAI,CAACQ,OAAO,EAAE;IACV,MAAM,IAAIE,KAAK,CAACT,uBAAuB,CAAC;EAC5C;EACA,MAAM;IAAEU;EAAQ,CAAC,GAAGH,OAAO;EAC3B,MAAM;IAAEI;EAAK,CAAC,GAAGD,OAAO;EACxB,MAAME,cAAc,GAAGhB,WAAW,CAAEiB,KAAK,IAAAC,aAAA,KAAWhB,gBAAgB,CAAC;IAAEa,IAAI;IAAEE;EAAM,CAAC,CAAC,CAAG,EAAE,CAACF,IAAI,CAAC,CAAC;EACjG,MAAMI,UAAU,GAAGT,QAAQ,GAAGL,aAAa,CAACK,QAAQ,CAAC,GAAGJ,iBAAiB;EACzE;EACA;EACA,MAAM;IAAEc;EAAW,CAAC,GAAGT,OAAO;EAC9B,MAAMU,MAAM,GAAGpB,WAAW,CAACa,OAAO,EAAEE,cAAc,EAAEG,UAAU,CAAC;EAC/D,MAAM;MAAEG,KAAK;MAAEC,cAAc;MAAEC;IAAc,CAAC,GAAGH,MAAM;IAAfI,IAAI,GAAAC,wBAAA,CAAKL,MAAM,EAAAM,SAAA;EACvD;EACA;EACA,MAAMC,eAAe,GAAGd,OAAO,CAACe,WAAW,CAAC,CAAC;EAC7C;EACA,MAAMC,QAAQ,GAAGR,KAAK,KAAK,WAAW,GAAGf,WAAW,CAACqB,eAAe,CAAC,GAAG,IAAI;EAC5E;EACA,MAAMG,MAAM,GAAGvB,gBAAgB,CAACc,KAAK,EAAEM,eAAe,CAAC;EACvD,OAAAV,aAAA,CAAAA,aAAA,KACOO,IAAI;IACPL,UAAU;IACVE,KAAK;IACLC,cAAc;IACdC,IAAI;IACJ;IACAO,MAAM;IACND;EAAQ;AAEhB;AAEA,SAASrB,gBAAgB,IAAIuB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}