{"ast":null,"code":"import React,{useEffect,useState}from'react';import{fetchAuthSession}from'aws-amplify/auth';import'./Gallery.css';// Reuse gallery styles\n// Media thumbnail component with selection checkbox\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SelectableMediaThumbnail=_ref=>{let{url,fileType,tags,isSelected,onSelect,onMediaClick,width=200}=_ref;const[imageError,setImageError]=useState(false);const[mediaType,setMediaType]=useState(null);const detectMediaType=(url,fileType)=>{if(fileType){if(fileType.startsWith('image/'))return'image';if(fileType.startsWith('video/'))return'video';if(fileType.startsWith('audio/'))return'audio';}if(!url)return'unknown';const lowerUrl=url.toLowerCase();if(lowerUrl.includes('.jpg')||lowerUrl.includes('.jpeg')||lowerUrl.includes('.png')||lowerUrl.includes('.gif')||lowerUrl.includes('.webp')||lowerUrl.includes('.bmp')){return'image';}if(lowerUrl.includes('.mp4')||lowerUrl.includes('.mov')||lowerUrl.includes('.avi')||lowerUrl.includes('.mkv')||lowerUrl.includes('.webm')||lowerUrl.includes('.quicktime')){return'video';}if(lowerUrl.includes('.mp3')||lowerUrl.includes('.wav')||lowerUrl.includes('.ogg')||lowerUrl.includes('.m4a')||lowerUrl.includes('.flac')||lowerUrl.includes('.aac')){return'audio';}return'unknown';};const currentMediaType=mediaType||detectMediaType(url,fileType);const handleImageError=()=>{setImageError(true);setMediaType(detectMediaType(url,fileType));};const renderImageThumbnail=()=>/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"thumbnail\",style:{width:'100%',height:180,objectFit:'cover',cursor:'pointer',border:isSelected?'3px solid #2196f3':'1px solid #ddd',borderRadius:'4px',transition:'all 0.2s ease'},onClick:()=>onMediaClick(url),onError:handleImageError});const renderVideoThumbnail=()=>/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:180,border:isSelected?'3px solid #2196f3':'1px solid #ddd',borderRadius:'4px',cursor:'pointer',position:'relative',backgroundColor:'#f5f5f5',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',transition:'all 0.2s ease',backgroundImage:'linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%)',backgroundSize:'20px 20px'},onClick:()=>onMediaClick(url),children:[/*#__PURE__*/_jsx(\"svg\",{width:\"48\",height:\"48\",viewBox:\"0 0 24 24\",fill:\"#666\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 5v14l11-7z\"})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#666',marginTop:'8px',fontWeight:'bold'},children:\"VIDEO\"})]});const renderAudioThumbnail=()=>/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:180,border:isSelected?'3px solid #2196f3':'1px solid #ddd',borderRadius:'4px',cursor:'pointer',position:'relative',backgroundColor:'#f0f8ff',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',transition:'all 0.2s ease'},onClick:()=>onMediaClick(url),children:[/*#__PURE__*/_jsx(\"svg\",{width:\"48\",height:\"48\",viewBox:\"0 0 24 24\",fill:\"#4a90e2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#4a90e2',marginTop:'8px',fontWeight:'bold'},children:\"AUDIO\"}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:'15px',display:'flex',alignItems:'end',gap:'2px'},children:[12,20,8,16,24,10,18,14,22,6,16,12].map((height,i)=>/*#__PURE__*/_jsx(\"div\",{style:{width:'3px',height:\"\".concat(height,\"px\"),backgroundColor:'#4a90e2',borderRadius:'1px',opacity:0.7}},i))})]});const renderUnknownThumbnail=()=>/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:180,border:isSelected?'3px solid #2196f3':'1px solid #ddd',borderRadius:'4px',cursor:'pointer',backgroundColor:'#f5f5f5',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',transition:'all 0.2s ease'},onClick:()=>onMediaClick(url),children:[/*#__PURE__*/_jsx(\"svg\",{width:\"48\",height:\"48\",viewBox:\"0 0 24 24\",fill:\"#999\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\"})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',color:'#999',marginTop:'8px',fontWeight:'bold'},children:\"FILE\"})]});// Render the appropriate thumbnail\nlet thumbnailContent;if(!imageError&&(currentMediaType==='image'||currentMediaType==='unknown')){thumbnailContent=renderImageThumbnail();}else if(currentMediaType==='video'){thumbnailContent=renderVideoThumbnail();}else if(currentMediaType==='audio'){thumbnailContent=renderAudioThumbnail();}else{thumbnailContent=renderUnknownThumbnail();}return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'8px',left:'8px',zIndex:10},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isSelected,onChange:e=>{e.stopPropagation();onSelect();},style:{width:'18px',height:'18px',cursor:'pointer'}})}),thumbnailContent]});};const ManualBulkTagging=_ref2=>{let{onBack}=_ref2;const[mediaItems,setMediaItems]=useState([]);const[selectedItems,setSelectedItems]=useState(new Set());const[searchTag,setSearchTag]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[totalCount,setTotalCount]=useState(0);// Tagging interface state\nconst[bulkOperation,setBulkOperation]=useState('add');// 'add' or 'remove'\nconst[bulkTags,setBulkTags]=useState([{name:'',count:1}]);const[isSubmitting,setIsSubmitting]=useState(false);const apiBase='https://5myucif3s8.execute-api.us-east-1.amazonaws.com/dev';useEffect(()=>{fetchAllMedia();},[]);const fetchAllMedia=async()=>{setLoading(true);try{var _tokens$idToken;const{tokens}=await fetchAuthSession();const idToken=tokens===null||tokens===void 0?void 0:(_tokens$idToken=tokens.idToken)===null||_tokens$idToken===void 0?void 0:_tokens$idToken.toString();if(!idToken){throw new Error('Authentication token not available');}const res=await fetch(\"\".concat(apiBase,\"/show-gallery\"),{method:'GET',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(idToken)}});if(!res.ok){const text=await res.text();throw new Error(\"Fetch failed: \".concat(res.status,\" \").concat(text));}const data=await res.json();console.log('Gallery API response:',data);const allItems=transformGalleryData(data.gallery||{});setMediaItems(allItems);setTotalCount(data.total_count||allItems.length);setError('');}catch(err){console.error('Error fetching media:',err);setError('Failed to load media files.');}finally{setLoading(false);}};const transformGalleryData=gallery=>{const allItems=[];['images','audio','video','other'].forEach(fileType=>{if(gallery[fileType]&&Array.isArray(gallery[fileType])){gallery[fileType].forEach(item=>{const tagsArray=transformTags(item.tags||{});allItems.push({url:item.url,file_type:item.file_type,file_id:item.file_id,upload_date:item.upload_date,tags:tagsArray,tagsObject:item.tags||{}});});}});return allItems;};const transformTags=tagsObject=>{if(!tagsObject||typeof tagsObject!=='object'){return[];}return Object.entries(tagsObject).map(_ref3=>{let[species,count]=_ref3;return count>1?\"\".concat(species,\" (\").concat(count,\")\"):species;});};const handleSelectItem=url=>{const newSelected=new Set(selectedItems);if(newSelected.has(url)){newSelected.delete(url);}else{newSelected.add(url);}setSelectedItems(newSelected);};const handleSelectAll=()=>{if(selectedItems.size===filteredItems.length){setSelectedItems(new Set());// Deselect all\n}else{setSelectedItems(new Set(filteredItems.map(item=>item.url)));// Select all filtered\n}};const handleMediaClick=async mediaUrl=>{// Same media click handler from Gallery\ntry{console.log('Opening media:',mediaUrl);if(mediaUrl.includes('/thumbnails/')){try{var _tokens$idToken2;const{tokens}=await fetchAuthSession();const token=tokens===null||tokens===void 0?void 0:(_tokens$idToken2=tokens.idToken)===null||_tokens$idToken2===void 0?void 0:_tokens$idToken2.toString();const response=await fetch(\"\".concat(apiBase,\"/search/by-thumbnail-url?thumbnail_url=\").concat(encodeURIComponent(mediaUrl)),{method:'GET',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){const data=await response.json();if(data.links&&data.links.length>0){window.open(data.links[0],'_blank');return;}}}catch(err){console.error('API lookup failed, trying fallback:',err);}const originalUrl=mediaUrl.replace('/thumbnails/','/');window.open(originalUrl,'_blank');}else{window.open(mediaUrl,'_blank');}}catch(err){console.error('Media click failed:',err);setError(\"Error opening media: \".concat(err.message));}};const handleSubmitTags=async()=>{if(selectedItems.size===0){setError('Please select at least one media file');return;}const validTags=bulkTags.filter(t=>t.name.trim()&&t.count>0);if(validTags.length===0){setError('Please add at least one valid tag');return;}setIsSubmitting(true);setError('');try{var _tokens$idToken3;const{tokens}=await fetchAuthSession();const token=tokens===null||tokens===void 0?void 0:(_tokens$idToken3=tokens.idToken)===null||_tokens$idToken3===void 0?void 0:_tokens$idToken3.toString();const tagArray=validTags.map(t=>\"\".concat(t.name.trim(),\",\").concat(t.count));const urlArray=Array.from(selectedItems);const response=await fetch(\"\".concat(apiBase,\"/manual-bulk-tagging\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({url:urlArray,operation:bulkOperation==='add'?1:0,tags:tagArray})});const data=await response.json();if(!response.ok){throw new Error(data.error||'Request failed');}// Success - refresh the gallery and clear selections\nawait fetchAllMedia();setSelectedItems(new Set());setBulkTags([{name:'',count:1}]);alert(\"Successfully \".concat(bulkOperation==='add'?'added':'removed',\" tags for \").concat(urlArray.length,\" files\"));}catch(err){console.error('Bulk tagging error:',err);setError(err.message);}finally{setIsSubmitting(false);}};// Filter items based on search tag\nconst filteredItems=searchTag?mediaItems.filter(item=>{var _item$tags;const searchLower=searchTag.toLowerCase();const matchesDisplayTags=(_item$tags=item.tags)===null||_item$tags===void 0?void 0:_item$tags.some(tag=>tag.toLowerCase().includes(searchLower));const matchesOriginalTags=Object.keys(item.tagsObject||{}).some(species=>species.toLowerCase().includes(searchLower));return matchesDisplayTags||matchesOriginalTags;}):mediaItems;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',maxWidth:'1200px',margin:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onBack,style:{padding:'8px 16px',marginRight:'16px',backgroundColor:'#f5f5f5',border:'1px solid #ddd',borderRadius:'4px',cursor:'pointer'},children:\"Back to Search\"}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:0},children:\"Manual Bulk Tagging\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'16px',marginBottom:'20px',padding:'16px',backgroundColor:'#f9f9f9',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Filter by bird species...\",value:searchTag,onChange:e=>setSearchTag(e.target.value),style:{padding:'8px',border:'1px solid #ddd',borderRadius:'4px',width:'300px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSelectAll,style:{padding:'8px 16px',backgroundColor:selectedItems.size===filteredItems.length?'#ff9800':'#2196f3',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:selectedItems.size===filteredItems.length?'Deselect All':'Select All'}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#666'},children:[selectedItems.size,\" of \",filteredItems.length,\" selected\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#d32f2f',backgroundColor:'#ffebee',padding:'12px',borderRadius:'4px',marginBottom:'20px',borderLeft:'4px solid #d32f2f'},children:error}),loading&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#1976d2',backgroundColor:'#e3f2fd',padding:'10px',borderRadius:'4px',marginBottom:'20px'},children:\"Loading gallery...\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery-grid\",style:{marginBottom:'30px'},children:filteredItems.length===0&&!loading?/*#__PURE__*/_jsx(\"p\",{children:\"No matching files found.\"}):filteredItems.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-tile\",children:[/*#__PURE__*/_jsx(SelectableMediaThumbnail,{url:item.url,fileType:item.file_type,tags:item.tags,isSelected:selectedItems.has(item.url),onSelect:()=>handleSelectItem(item.url),onMediaClick:handleMediaClick}),item.tags&&item.tags.length>0&&/*#__PURE__*/_jsx(\"ul\",{style:{marginTop:'8px'},children:item.tags.map((tag,i)=>/*#__PURE__*/_jsx(\"li\",{children:tag},i))})]},item.file_id||index))}),selectedItems.size>0&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'sticky',bottom:'20px',backgroundColor:'#ffffff',border:'2px solid #2196f3',borderRadius:'8px',padding:'20px',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',zIndex:1000,opacity:1},children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Add/Remove Tags for \",selectedItems.size,\" selected files\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"add\",checked:bulkOperation==='add',onChange:e=>setBulkOperation(e.target.value),style:{marginRight:'8px'}}),\"Add Tags\"]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"remove\",checked:bulkOperation==='remove',onChange:e=>setBulkOperation(e.target.value),style:{marginRight:'8px'}}),\"Remove Tags\"]})]}),bulkTags.map((tag,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Species name\",value:tag.name,onChange:e=>{const updated=[...bulkTags];updated[i].name=e.target.value;setBulkTags(updated);},style:{padding:'8px',border:'1px solid #ddd',borderRadius:'4px',flex:1}}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:tag.count,onChange:e=>{const updated=[...bulkTags];updated[i].count=parseInt(e.target.value)||1;setBulkTags(updated);},style:{padding:'8px',border:'1px solid #ddd',borderRadius:'4px',width:'80px'},min:\"1\"}),bulkTags.length>1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBulkTags(bulkTags.filter((_,j)=>j!==i)),style:{padding:'8px',backgroundColor:'#f44336',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Remove\"})]},i)),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'12px',marginTop:'16px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBulkTags([...bulkTags,{name:'',count:1}]),style:{padding:'8px 16px',backgroundColor:'#4caf50',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"+ Add Tag\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmitTags,disabled:isSubmitting,style:{padding:'8px 24px',backgroundColor:isSubmitting?'#ccc':'#2196f3',color:'white',border:'none',borderRadius:'4px',cursor:isSubmitting?'not-allowed':'pointer',fontWeight:'bold'},children:isSubmitting?'Submitting...':'Submit'})]})]})]});};export default ManualBulkTagging;","map":{"version":3,"names":["React","useEffect","useState","fetchAuthSession","jsx","_jsx","jsxs","_jsxs","SelectableMediaThumbnail","_ref","url","fileType","tags","isSelected","onSelect","onMediaClick","width","imageError","setImageError","mediaType","setMediaType","detectMediaType","startsWith","lowerUrl","toLowerCase","includes","currentMediaType","handleImageError","renderImageThumbnail","src","alt","style","height","objectFit","cursor","border","borderRadius","transition","onClick","onError","renderVideoThumbnail","position","backgroundColor","display","flexDirection","alignItems","justifyContent","backgroundImage","backgroundSize","children","viewBox","fill","d","fontSize","color","marginTop","fontWeight","renderAudioThumbnail","bottom","gap","map","i","concat","opacity","renderUnknownThumbnail","thumbnailContent","top","left","zIndex","type","checked","onChange","e","stopPropagation","ManualBulkTagging","_ref2","onBack","mediaItems","setMediaItems","selectedItems","setSelectedItems","Set","searchTag","setSearchTag","error","setError","loading","setLoading","totalCount","setTotalCount","bulkOperation","setBulkOperation","bulkTags","setBulkTags","name","count","isSubmitting","setIsSubmitting","apiBase","fetchAllMedia","_tokens$idToken","tokens","idToken","toString","Error","res","fetch","method","headers","Authorization","ok","text","status","data","json","console","log","allItems","transformGalleryData","gallery","total_count","length","err","forEach","Array","isArray","item","tagsArray","transformTags","push","file_type","file_id","upload_date","tagsObject","Object","entries","_ref3","species","handleSelectItem","newSelected","has","delete","add","handleSelectAll","size","filteredItems","handleMediaClick","mediaUrl","_tokens$idToken2","token","response","encodeURIComponent","links","window","open","originalUrl","replace","message","handleSubmitTags","validTags","filter","t","trim","_tokens$idToken3","tagArray","urlArray","from","body","JSON","stringify","operation","alert","_item$tags","searchLower","matchesDisplayTags","some","tag","matchesOriginalTags","keys","padding","maxWidth","margin","marginBottom","marginRight","placeholder","value","target","borderLeft","className","index","boxShadow","updated","flex","parseInt","min","_","j","disabled"],"sources":["/Users/saisaran/Desktop/BirdTag/UI/src/ManualBulkTagging.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { fetchAuthSession } from 'aws-amplify/auth';\nimport './Gallery.css'; // Reuse gallery styles\n\n// Media thumbnail component with selection checkbox\nconst SelectableMediaThumbnail = ({ url, fileType, tags, isSelected, onSelect, onMediaClick, width = 200 }) => {\n  const [imageError, setImageError] = useState(false);\n  const [mediaType, setMediaType] = useState(null);\n\n  const detectMediaType = (url, fileType) => {\n    if (fileType) {\n      if (fileType.startsWith('image/')) return 'image';\n      if (fileType.startsWith('video/')) return 'video';  \n      if (fileType.startsWith('audio/')) return 'audio';\n    }\n    \n    if (!url) return 'unknown';\n    \n    const lowerUrl = url.toLowerCase();\n    \n    if (lowerUrl.includes('.jpg') || lowerUrl.includes('.jpeg') || \n        lowerUrl.includes('.png') || lowerUrl.includes('.gif') || \n        lowerUrl.includes('.webp') || lowerUrl.includes('.bmp')) {\n      return 'image';\n    }\n    \n    if (lowerUrl.includes('.mp4') || lowerUrl.includes('.mov') || \n        lowerUrl.includes('.avi') || lowerUrl.includes('.mkv') || \n        lowerUrl.includes('.webm') || lowerUrl.includes('.quicktime')) {\n      return 'video';\n    }\n    \n    if (lowerUrl.includes('.mp3') || lowerUrl.includes('.wav') || \n        lowerUrl.includes('.ogg') || lowerUrl.includes('.m4a') || \n        lowerUrl.includes('.flac') || lowerUrl.includes('.aac')) {\n      return 'audio';\n    }\n    \n    return 'unknown';\n  };\n\n  const currentMediaType = mediaType || detectMediaType(url, fileType);\n  const handleImageError = () => {\n    setImageError(true);\n    setMediaType(detectMediaType(url, fileType));\n  };\n\n  const renderImageThumbnail = () => (\n    <img\n      src={url}\n      alt=\"thumbnail\"\n      style={{\n        width: '100%',\n        height: 180,\n        objectFit: 'cover',\n        cursor: 'pointer',\n        border: isSelected ? '3px solid #2196f3' : '1px solid #ddd',\n        borderRadius: '4px',\n        transition: 'all 0.2s ease'\n      }}\n      onClick={() => onMediaClick(url)}\n      onError={handleImageError}\n    />\n  );\n\n  const renderVideoThumbnail = () => (\n    <div\n      style={{\n        width: '100%',\n        height: 180,\n        border: isSelected ? '3px solid #2196f3' : '1px solid #ddd',\n        borderRadius: '4px',\n        cursor: 'pointer',\n        position: 'relative',\n        backgroundColor: '#f5f5f5',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        transition: 'all 0.2s ease',\n        backgroundImage: 'linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%)',\n        backgroundSize: '20px 20px'\n      }}\n      onClick={() => onMediaClick(url)}\n    >\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"#666\">\n        <path d=\"M8 5v14l11-7z\"/>\n      </svg>\n      <div style={{\n        fontSize: '14px',\n        color: '#666',\n        marginTop: '8px',\n        fontWeight: 'bold'\n      }}>\n        VIDEO\n      </div>\n    </div>\n  );\n\n  const renderAudioThumbnail = () => (\n    <div\n      style={{\n        width: '100%',\n        height: 180,\n        border: isSelected ? '3px solid #2196f3' : '1px solid #ddd',\n        borderRadius: '4px',\n        cursor: 'pointer',\n        position: 'relative',\n        backgroundColor: '#f0f8ff',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        transition: 'all 0.2s ease'\n      }}\n      onClick={() => onMediaClick(url)}\n    >\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"#4a90e2\">\n        <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>\n      </svg>\n      <div style={{\n        fontSize: '14px',\n        color: '#4a90e2',\n        marginTop: '8px',\n        fontWeight: 'bold'\n      }}>\n        AUDIO\n      </div>\n      \n      <div style={{\n        position: 'absolute',\n        bottom: '15px',\n        display: 'flex',\n        alignItems: 'end',\n        gap: '2px'\n      }}>\n        {[12, 20, 8, 16, 24, 10, 18, 14, 22, 6, 16, 12].map((height, i) => (\n          <div\n            key={i}\n            style={{\n              width: '3px',\n              height: `${height}px`,\n              backgroundColor: '#4a90e2',\n              borderRadius: '1px',\n              opacity: 0.7\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n\n  const renderUnknownThumbnail = () => (\n    <div\n      style={{\n        width: '100%',\n        height: 180,\n        border: isSelected ? '3px solid #2196f3' : '1px solid #ddd',\n        borderRadius: '4px',\n        cursor: 'pointer',\n        backgroundColor: '#f5f5f5',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        transition: 'all 0.2s ease'\n      }}\n      onClick={() => onMediaClick(url)}\n    >\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"#999\">\n        <path d=\"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z\"/>\n      </svg>\n      <div style={{\n        fontSize: '14px',\n        color: '#999',\n        marginTop: '8px',\n        fontWeight: 'bold'\n      }}>\n        FILE\n      </div>\n    </div>\n  );\n\n  // Render the appropriate thumbnail\n  let thumbnailContent;\n  if (!imageError && (currentMediaType === 'image' || currentMediaType === 'unknown')) {\n    thumbnailContent = renderImageThumbnail();\n  } else if (currentMediaType === 'video') {\n    thumbnailContent = renderVideoThumbnail();\n  } else if (currentMediaType === 'audio') {\n    thumbnailContent = renderAudioThumbnail();\n  } else {\n    thumbnailContent = renderUnknownThumbnail();\n  }\n\n  return (\n    <div style={{ position: 'relative' }}>\n      {/* Selection checkbox */}\n      <div style={{\n        position: 'absolute',\n        top: '8px',\n        left: '8px',\n        zIndex: 10\n      }}>\n        <input\n          type=\"checkbox\"\n          checked={isSelected}\n          onChange={(e) => {\n            e.stopPropagation();\n            onSelect();\n          }}\n          style={{\n            width: '18px',\n            height: '18px',\n            cursor: 'pointer'\n          }}\n        />\n      </div>\n      \n      {/* Thumbnail content */}\n      {thumbnailContent}\n    </div>\n  );\n};\n\nconst ManualBulkTagging = ({ onBack }) => {\n  const [mediaItems, setMediaItems] = useState([]);\n  const [selectedItems, setSelectedItems] = useState(new Set());\n  const [searchTag, setSearchTag] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [totalCount, setTotalCount] = useState(0);\n  \n  // Tagging interface state\n  const [bulkOperation, setBulkOperation] = useState('add'); // 'add' or 'remove'\n  const [bulkTags, setBulkTags] = useState([{ name: '', count: 1 }]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const apiBase = 'https://5myucif3s8.execute-api.us-east-1.amazonaws.com/dev';\n\n  useEffect(() => {\n    fetchAllMedia();\n  }, []);\n\n  const fetchAllMedia = async () => {\n    setLoading(true);\n    try {\n      const { tokens } = await fetchAuthSession();\n      const idToken = tokens?.idToken?.toString();\n\n      if (!idToken) {\n        throw new Error('Authentication token not available');\n      }\n\n      const res = await fetch(`${apiBase}/show-gallery`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${idToken}`,\n        },\n      });\n\n      if (!res.ok) {\n        const text = await res.text();\n        throw new Error(`Fetch failed: ${res.status} ${text}`);\n      }\n\n      const data = await res.json();\n      console.log('Gallery API response:', data);\n\n      const allItems = transformGalleryData(data.gallery || {});\n      setMediaItems(allItems);\n      setTotalCount(data.total_count || allItems.length);\n      setError('');\n    } catch (err) {\n      console.error('Error fetching media:', err);\n      setError('Failed to load media files.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const transformGalleryData = (gallery) => {\n    const allItems = [];\n    \n    ['images', 'audio', 'video', 'other'].forEach(fileType => {\n      if (gallery[fileType] && Array.isArray(gallery[fileType])) {\n        gallery[fileType].forEach(item => {\n          const tagsArray = transformTags(item.tags || {});\n          \n          allItems.push({\n            url: item.url,\n            file_type: item.file_type,\n            file_id: item.file_id,\n            upload_date: item.upload_date,\n            tags: tagsArray,\n            tagsObject: item.tags || {}\n          });\n        });\n      }\n    });\n    \n    return allItems;\n  };\n\n  const transformTags = (tagsObject) => {\n    if (!tagsObject || typeof tagsObject !== 'object') {\n      return [];\n    }\n    \n    return Object.entries(tagsObject).map(([species, count]) => {\n      return count > 1 ? `${species} (${count})` : species;\n    });\n  };\n\n  const handleSelectItem = (url) => {\n    const newSelected = new Set(selectedItems);\n    if (newSelected.has(url)) {\n      newSelected.delete(url);\n    } else {\n      newSelected.add(url);\n    }\n    setSelectedItems(newSelected);\n  };\n\n  const handleSelectAll = () => {\n    if (selectedItems.size === filteredItems.length) {\n      setSelectedItems(new Set()); // Deselect all\n    } else {\n      setSelectedItems(new Set(filteredItems.map(item => item.url))); // Select all filtered\n    }\n  };\n\n  const handleMediaClick = async (mediaUrl) => {\n    // Same media click handler from Gallery\n    try {\n      console.log('Opening media:', mediaUrl);\n\n      if (mediaUrl.includes('/thumbnails/')) {\n        try {\n          const { tokens } = await fetchAuthSession();\n          const token = tokens?.idToken?.toString();\n\n          const response = await fetch(\n            `${apiBase}/search/by-thumbnail-url?thumbnail_url=${encodeURIComponent(mediaUrl)}`,\n            {\n              method: 'GET',\n              headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              }\n            }\n          );\n\n          if (response.ok) {\n            const data = await response.json();\n            if (data.links && data.links.length > 0) {\n              window.open(data.links[0], '_blank');\n              return;\n            }\n          }\n        } catch (err) {\n          console.error('API lookup failed, trying fallback:', err);\n        }\n        \n        const originalUrl = mediaUrl.replace('/thumbnails/', '/');\n        window.open(originalUrl, '_blank');\n      } else {\n        window.open(mediaUrl, '_blank');\n      }\n    } catch (err) {\n      console.error('Media click failed:', err);\n      setError(`Error opening media: ${err.message}`);\n    }\n  };\n\n  const handleSubmitTags = async () => {\n    if (selectedItems.size === 0) {\n      setError('Please select at least one media file');\n      return;\n    }\n\n    const validTags = bulkTags.filter(t => t.name.trim() && t.count > 0);\n    if (validTags.length === 0) {\n      setError('Please add at least one valid tag');\n      return;\n    }\n\n    setIsSubmitting(true);\n    setError('');\n\n    try {\n      const { tokens } = await fetchAuthSession();\n      const token = tokens?.idToken?.toString();\n\n      const tagArray = validTags.map(t => `${t.name.trim()},${t.count}`);\n      const urlArray = Array.from(selectedItems);\n\n      const response = await fetch(`${apiBase}/manual-bulk-tagging`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          url: urlArray,\n          operation: bulkOperation === 'add' ? 1 : 0,\n          tags: tagArray,\n        }),\n      });\n\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || 'Request failed');\n      }\n\n      // Success - refresh the gallery and clear selections\n      await fetchAllMedia();\n      setSelectedItems(new Set());\n      setBulkTags([{ name: '', count: 1 }]);\n      \n      alert(`Successfully ${bulkOperation === 'add' ? 'added' : 'removed'} tags for ${urlArray.length} files`);\n\n    } catch (err) {\n      console.error('Bulk tagging error:', err);\n      setError(err.message);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Filter items based on search tag\n  const filteredItems = searchTag\n    ? mediaItems.filter((item) => {\n        const searchLower = searchTag.toLowerCase();\n        \n        const matchesDisplayTags = item.tags?.some(tag =>\n          tag.toLowerCase().includes(searchLower)\n        );\n        \n        const matchesOriginalTags = Object.keys(item.tagsObject || {}).some(species =>\n          species.toLowerCase().includes(searchLower)\n        );\n        \n        return matchesDisplayTags || matchesOriginalTags;\n      })\n    : mediaItems;\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '1200px', margin: 'auto' }}>\n      {/* Header */}\n      <div style={{ display: 'flex', alignItems: 'center', marginBottom: '20px' }}>\n        <button \n          onClick={onBack}\n          style={{\n            padding: '8px 16px',\n            marginRight: '16px',\n            backgroundColor: '#f5f5f5',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          }}\n        >\n          Back to Search\n        </button>\n        <h2 style={{ margin: 0 }}>Manual Bulk Tagging</h2>\n      </div>\n\n      {/* Selection and search controls */}\n      <div style={{ \n        display: 'flex', \n        alignItems: 'center', \n        gap: '16px', \n        marginBottom: '20px',\n        padding: '16px',\n        backgroundColor: '#f9f9f9',\n        borderRadius: '6px'\n      }}>\n        <input\n          type=\"text\"\n          placeholder=\"Filter by bird species...\"\n          value={searchTag}\n          onChange={(e) => setSearchTag(e.target.value)}\n          style={{\n            padding: '8px',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            width: '300px'\n          }}\n        />\n        \n        <button \n          onClick={handleSelectAll}\n          style={{\n            padding: '8px 16px',\n            backgroundColor: selectedItems.size === filteredItems.length ? '#ff9800' : '#2196f3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          }}\n        >\n          {selectedItems.size === filteredItems.length ? 'Deselect All' : 'Select All'}\n        </button>\n        \n        <span style={{ color: '#666' }}>\n          {selectedItems.size} of {filteredItems.length} selected\n        </span>\n      </div>\n\n      {/* Error display */}\n      {error && (\n        <div style={{\n          color: '#d32f2f',\n          backgroundColor: '#ffebee',\n          padding: '12px',\n          borderRadius: '4px',\n          marginBottom: '20px',\n          borderLeft: '4px solid #d32f2f'\n        }}>\n          {error}\n        </div>\n      )}\n\n      {/* Loading state */}\n      {loading && (\n        <div style={{\n          color: '#1976d2',\n          backgroundColor: '#e3f2fd',\n          padding: '10px',\n          borderRadius: '4px',\n          marginBottom: '20px'\n        }}>\n          Loading gallery...\n        </div>\n      )}\n\n      {/* Gallery grid */}\n      <div className=\"gallery-grid\" style={{ marginBottom: '30px' }}>\n        {filteredItems.length === 0 && !loading ? (\n          <p>No matching files found.</p>\n        ) : (\n          filteredItems.map((item, index) => (\n            <div key={item.file_id || index} className=\"gallery-tile\">\n              <SelectableMediaThumbnail\n                url={item.url}\n                fileType={item.file_type}\n                tags={item.tags}\n                isSelected={selectedItems.has(item.url)}\n                onSelect={() => handleSelectItem(item.url)}\n                onMediaClick={handleMediaClick}\n              />\n              \n              {/* Tags display */}\n              {item.tags && item.tags.length > 0 && (\n                <ul style={{ marginTop: '8px' }}>\n                  {item.tags.map((tag, i) => (\n                    <li key={i}>{tag}</li>\n                  ))}\n                </ul>\n              )}\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Tagging interface */}\n      {selectedItems.size > 0 && (\n        <div style={{\n          position: 'sticky',\n          bottom: '20px',\n          backgroundColor: '#ffffff',\n          border: '2px solid #2196f3',\n          borderRadius: '8px',\n          padding: '20px',\n          boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n          zIndex: 1000,\n          opacity: 1\n        }}>\n          <h3>Add/Remove Tags for {selectedItems.size} selected files</h3>\n          \n          {/* Operation selection */}\n          <div style={{ marginBottom: '16px' }}>\n            <label style={{ display: 'flex', alignItems: 'center', marginBottom: '8px' }}>\n              <input\n                type=\"radio\"\n                value=\"add\"\n                checked={bulkOperation === 'add'}\n                onChange={(e) => setBulkOperation(e.target.value)}\n                style={{ marginRight: '8px' }}\n              />\n              Add Tags\n            </label>\n            <label style={{ display: 'flex', alignItems: 'center' }}>\n              <input\n                type=\"radio\"\n                value=\"remove\"\n                checked={bulkOperation === 'remove'}\n                onChange={(e) => setBulkOperation(e.target.value)}\n                style={{ marginRight: '8px' }}\n              />\n              Remove Tags\n            </label>\n          </div>\n\n          {/* Tags input */}\n          {bulkTags.map((tag, i) => (\n            <div key={i} style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px' }}>\n              <input\n                type=\"text\"\n                placeholder=\"Species name\"\n                value={tag.name}\n                onChange={(e) => {\n                  const updated = [...bulkTags];\n                  updated[i].name = e.target.value;\n                  setBulkTags(updated);\n                }}\n                style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px', flex: 1 }}\n              />\n              <input\n                type=\"number\"\n                value={tag.count}\n                onChange={(e) => {\n                  const updated = [...bulkTags];\n                  updated[i].count = parseInt(e.target.value) || 1;\n                  setBulkTags(updated);\n                }}\n                style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px', width: '80px' }}\n                min=\"1\"\n              />\n              {bulkTags.length > 1 && (\n                <button \n                  onClick={() => setBulkTags(bulkTags.filter((_, j) => j !== i))}\n                  style={{\n                    padding: '8px',\n                    backgroundColor: '#f44336',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Remove\n                </button>\n              )}\n            </div>\n          ))}\n\n          {/* Controls */}\n          <div style={{ display: 'flex', gap: '12px', marginTop: '16px' }}>\n            <button \n              onClick={() => setBulkTags([...bulkTags, { name: '', count: 1 }])}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#4caf50',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              }}\n            >\n              + Add Tag\n            </button>\n            \n            <button \n              onClick={handleSubmitTags}\n              disabled={isSubmitting}\n              style={{\n                padding: '8px 24px',\n                backgroundColor: isSubmitting ? '#ccc' : '#2196f3',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: isSubmitting ? 'not-allowed' : 'pointer',\n                fontWeight: 'bold'\n              }}\n            >\n              {isSubmitting ? 'Submitting...' : 'Submit'}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ManualBulkTagging;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}