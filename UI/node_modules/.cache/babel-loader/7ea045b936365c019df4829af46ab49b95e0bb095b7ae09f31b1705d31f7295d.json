{"ast":null,"code":"import { AmplifyErrorCode } from '@aws-amplify/core/internals/utils';\nimport { Hub } from 'aws-amplify/utils';\nimport '../../utils/setUserAgent/constants.mjs';\nimport { isFunction } from '../../utils/utils.mjs';\n\n/**\n * Handles Amplify JS Auth hub events, by forwarding hub events as appropriate\n * xstate events.\n */\nconst defaultAuthHubHandler = (_ref, service, options) => {\n  let {\n    payload\n  } = _ref;\n  const {\n    data,\n    event\n  } = payload;\n  const {\n    send\n  } = service;\n  const {\n    onSignIn,\n    onSignOut\n  } = options !== null && options !== void 0 ? options : {};\n  switch (event) {\n    case 'signedIn':\n      {\n        if (isFunction(onSignIn)) {\n          onSignIn(payload);\n        }\n        break;\n      }\n    case 'signInWithRedirect':\n      {\n        send('SIGN_IN_WITH_REDIRECT');\n        break;\n      }\n    case 'signedOut':\n      {\n        if (isFunction(onSignOut)) {\n          onSignOut();\n        }\n        send('SIGN_OUT');\n        break;\n      }\n    case 'tokenRefresh_failure':\n      {\n        var _data$error;\n        if ((data === null || data === void 0 || (_data$error = data.error) === null || _data$error === void 0 ? void 0 : _data$error.name) === AmplifyErrorCode.NetworkError) {\n          return;\n        }\n        send('SIGN_OUT');\n        break;\n      }\n  }\n};\n/**\n * Listens to external auth Hub events and sends corresponding event to\n * the `service.send` of interest\n *\n * @param service - contains state machine `send` function\n * @param handler - auth event handler\n * @returns function that unsubscribes to the hub evenmt\n */\nconst listenToAuthHub = function (service) {\n  let handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultAuthHubHandler;\n  const eventHandler = data => handler(data, service);\n  return Hub.listen('auth', eventHandler, 'authenticator-hub-handler');\n};\nexport { defaultAuthHubHandler, listenToAuthHub };","map":{"version":3,"names":["AmplifyErrorCode","Hub","isFunction","defaultAuthHubHandler","_ref","service","options","payload","data","event","send","onSignIn","onSignOut","_data$error","error","name","NetworkError","listenToAuthHub","handler","arguments","length","undefined","eventHandler","listen"],"sources":["/Users/saisaran/Desktop/BirdTag/UI/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/defaultAuthHubHandler.mjs"],"sourcesContent":["import { AmplifyErrorCode } from '@aws-amplify/core/internals/utils';\nimport { Hub } from 'aws-amplify/utils';\nimport '../../utils/setUserAgent/constants.mjs';\nimport { isFunction } from '../../utils/utils.mjs';\n\n/**\n * Handles Amplify JS Auth hub events, by forwarding hub events as appropriate\n * xstate events.\n */\nconst defaultAuthHubHandler = ({ payload }, service, options) => {\n    const { data, event } = payload;\n    const { send } = service;\n    const { onSignIn, onSignOut } = options ?? {};\n    switch (event) {\n        case 'signedIn': {\n            if (isFunction(onSignIn)) {\n                onSignIn(payload);\n            }\n            break;\n        }\n        case 'signInWithRedirect': {\n            send('SIGN_IN_WITH_REDIRECT');\n            break;\n        }\n        case 'signedOut': {\n            if (isFunction(onSignOut)) {\n                onSignOut();\n            }\n            send('SIGN_OUT');\n            break;\n        }\n        case 'tokenRefresh_failure': {\n            if (data?.error?.name === AmplifyErrorCode.NetworkError) {\n                return;\n            }\n            send('SIGN_OUT');\n            break;\n        }\n    }\n};\n/**\n * Listens to external auth Hub events and sends corresponding event to\n * the `service.send` of interest\n *\n * @param service - contains state machine `send` function\n * @param handler - auth event handler\n * @returns function that unsubscribes to the hub evenmt\n */\nconst listenToAuthHub = (service, handler = defaultAuthHubHandler) => {\n    const eventHandler = (data) => handler(data, service);\n    return Hub.listen('auth', eventHandler, 'authenticator-hub-handler');\n};\n\nexport { defaultAuthHubHandler, listenToAuthHub };\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,mCAAmC;AACpE,SAASC,GAAG,QAAQ,mBAAmB;AACvC,OAAO,wCAAwC;AAC/C,SAASC,UAAU,QAAQ,uBAAuB;;AAElD;AACA;AACA;AACA;AACA,MAAMC,qBAAqB,GAAGA,CAAAC,IAAA,EAAcC,OAAO,EAAEC,OAAO,KAAK;EAAA,IAAlC;IAAEC;EAAQ,CAAC,GAAAH,IAAA;EACtC,MAAM;IAAEI,IAAI;IAAEC;EAAM,CAAC,GAAGF,OAAO;EAC/B,MAAM;IAAEG;EAAK,CAAC,GAAGL,OAAO;EACxB,MAAM;IAAEM,QAAQ;IAAEC;EAAU,CAAC,GAAGN,OAAO,aAAPA,OAAO,cAAPA,OAAO,GAAI,CAAC,CAAC;EAC7C,QAAQG,KAAK;IACT,KAAK,UAAU;MAAE;QACb,IAAIP,UAAU,CAACS,QAAQ,CAAC,EAAE;UACtBA,QAAQ,CAACJ,OAAO,CAAC;QACrB;QACA;MACJ;IACA,KAAK,oBAAoB;MAAE;QACvBG,IAAI,CAAC,uBAAuB,CAAC;QAC7B;MACJ;IACA,KAAK,WAAW;MAAE;QACd,IAAIR,UAAU,CAACU,SAAS,CAAC,EAAE;UACvBA,SAAS,CAAC,CAAC;QACf;QACAF,IAAI,CAAC,UAAU,CAAC;QAChB;MACJ;IACA,KAAK,sBAAsB;MAAE;QAAA,IAAAG,WAAA;QACzB,IAAI,CAAAL,IAAI,aAAJA,IAAI,gBAAAK,WAAA,GAAJL,IAAI,CAAEM,KAAK,cAAAD,WAAA,uBAAXA,WAAA,CAAaE,IAAI,MAAKf,gBAAgB,CAACgB,YAAY,EAAE;UACrD;QACJ;QACAN,IAAI,CAAC,UAAU,CAAC;QAChB;MACJ;EACJ;AACJ,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMO,eAAe,GAAG,SAAAA,CAACZ,OAAO,EAAsC;EAAA,IAApCa,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGhB,qBAAqB;EAC7D,MAAMmB,YAAY,GAAId,IAAI,IAAKU,OAAO,CAACV,IAAI,EAAEH,OAAO,CAAC;EACrD,OAAOJ,GAAG,CAACsB,MAAM,CAAC,MAAM,EAAED,YAAY,EAAE,2BAA2B,CAAC;AACxE,CAAC;AAED,SAASnB,qBAAqB,EAAEc,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}